CREATE TABLE User_(
   user_id INT AUTO_INCREMENT,
   name VARCHAR(50)  NOT NULL,
   firstname VARCHAR(50)  NOT NULL,
   email VARCHAR(50)  NOT NULL,
   password VARCHAR(50)  NOT NULL,
   type BOOLEAN NOT NULL,
   phone VARCHAR(50) ,
   role VARCHAR(50)  NOT NULL,
   user_adress VARCHAR(50)  NOT NULL,
   user_city VARCHAR(50) ,
   user_cp VARCHAR(50) ,
   PRIMARY KEY(user_id)
);

CREATE TABLE Category(
   category_id INT AUTO_INCREMENT,
   category_name VARCHAR(50)  NOT NULL,
   category_picture VARCHAR(50)  NOT NULL,
   category_id_1 INT,
   PRIMARY KEY(category_id),
   FOREIGN KEY(category_id_1) REFERENCES Category(category_id)
);

CREATE TABLE Payment(
   payment_id INT AUTO_INCREMENT,
   payment_method VARCHAR(50)  NOT NULL,
   payment_date DATE NOT NULL,
   payment_amount DECIMAL(19,4) NOT NULL,
   PRIMARY KEY(payment_id)
);

CREATE TABLE Product(
   product_id INT AUTO_INCREMENT,
   product_name VARCHAR(50)  NOT NULL,
   product_description TEXT NOT NULL,
   product_supplier VARCHAR(50) ,
   product_price DECIMAL(19,4) NOT NULL,
   product_picture VARCHAR(50)  NOT NULL,
   is_active BOOLEAN NOT NULL,
   user_id INT NOT NULL,
   category_id INT NOT NULL,
   PRIMARY KEY(product_id),
   FOREIGN KEY(user_id) REFERENCES User_(user_id),
   FOREIGN KEY(category_id) REFERENCES Category(category_id)
);

CREATE TABLE Order_(
   order_id INT AUTO_INCREMENT,
   order_date DATE NOT NULL,
   order_status INT NOT NULL,
   order_total DECIMAL(19,4),
   order_adress VARCHAR(50)  NOT NULL,
   order_city VARCHAR(50)  NOT NULL,
   order_cp VARCHAR(50)  NOT NULL,
   payment_id INT NOT NULL,
   user_id INT NOT NULL,
   PRIMARY KEY(order_id),
   FOREIGN KEY(payment_id) REFERENCES Payment(payment_id),
   FOREIGN KEY(user_id) REFERENCES User_(user_id)
);

CREATE TABLE Delivery(
   delivery_id INT AUTO_INCREMENT,
   delivery_name VARCHAR(50)  NOT NULL,
   followed_url VARCHAR(50) ,
   delivery_date VARCHAR(50)  NOT NULL,
   order_id INT NOT NULL,
   PRIMARY KEY(delivery_id),
   FOREIGN KEY(order_id) REFERENCES Order_(order_id)
);

CREATE TABLE detail(
   product_id INT,
   order_id INT,
   quantity INT,
   unit_price DECIMAL(19,4),
   reduction DECIMAL(4,2)  ,
   PRIMARY KEY(product_id, order_id),
   FOREIGN KEY(product_id) REFERENCES Product(product_id),
   FOREIGN KEY(order_id) REFERENCES Order_(order_id)
);

CREATE TABLE sort(
   product_id INT,
   delivery_id INT,
   quantity INT,
   PRIMARY KEY(product_id, delivery_id),
   FOREIGN KEY(product_id) REFERENCES Product(product_id),
   FOREIGN KEY(delivery_id) REFERENCES Delivery(delivery_id)
);
